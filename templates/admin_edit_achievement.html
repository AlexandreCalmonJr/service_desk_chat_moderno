{% extends "admin_base.html" %}

{% block title %}Editar Conquista - Service Desk{% endblock %}
{% block page_title %}Editar Conquista: {{ achievement.name }}{% endblock %}

{% block content %}
<div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md max-w-lg mx-auto">
    <form method="POST" action="{{ url_for('admin_edit_achievement', achievement_id=achievement.id) }}">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="name" class="block text-sm font-medium">Nome da Conquista</label>
                <input type="text" id="name" name="name" value="{{ achievement.name }}" class="w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:border-gray-600" required>
            </div>
            <div>
                <label for="icon" class="block text-sm font-medium">Ícone (FontAwesome)</label>
                <input type="text" id="icon" name="icon" value="{{ achievement.icon }}" class="w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:border-gray-600" required>
            </div>
        </div>
        <div class="mt-4">
            <label for="description" class="block text-sm font-medium">Descrição</label>
            <textarea id="description" name="description" rows="2" class="w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:border-gray-600" required>{{ achievement.description }}</textarea>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
            <div>
                <label for="trigger_type" class="block text-sm font-medium">Tipo de Gatilho</label>
                <select id="trigger_type" name="trigger_type" class="w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:border-gray-600" required>
                    <option value="challenges_completed" {% if achievement.trigger_type == 'challenges_completed' %}selected{% endif %}>Nº de Desafios Completados</option>
                    <option value="points_earned" {% if achievement.trigger_type == 'points_earned' %}selected{% endif %}>Nº de Pontos Ganhos</option>
                    <option value="paths_completed" {% if achievement.trigger_type == 'paths_completed' %}selected{% endif %}>Nº de Trilhas Completadas</option>
                    <option value="first_team_join" {% if achievement.trigger_type == 'first_team_join' %}selected{% endif %}>Entrar num Time</option>
                </select>
            </div>
            <div>
                <label for="trigger_value" class="block text-sm font-medium">Valor para Ativar</label>
                <input type="number" id="trigger_value" name="trigger_value" value="{{ achievement.trigger_value }}" class="w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:border-gray-600" required>
            </div>
        </div>

        <div class="flex justify-end space-x-4 mt-6">
            <a href="{{ url_for('admin_achievements') }}" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition">Cancelar</a>
            <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Salvar Alterações</button>
        </div>
    </form>
</div>
{% endblock %}