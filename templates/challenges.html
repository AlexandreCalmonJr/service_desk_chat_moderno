{% extends "base_layout.html" %}

{% block title %}Desafios{% endblock %}

{% block content %}
    <section class="challenges">
        <h2>Desafios Disponíveis</h2>
        {% if unlocked_challenges %}
            {% for challenge in unlocked_challenges %}
                <div class="challenge-card message-bubble">
                    <h3>{{ challenge.title }}</h3>
                    <p><strong>Recompensa:</strong> {{ challenge.points_reward }} pontos</p>
                    <p>{{ challenge.description }}</p>
                    <form method="POST" action="{{ url_for('submit_challenge', challenge_id=challenge.id) }}">
                        <textarea name="response" placeholder="Digite sua resposta" required class="chat-input"></textarea>
                        <button type="submit" class="chat-button">Enviar Resposta</button>
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <p class="message-bubble">Você já completou todos os desafios para o seu nível. Parabéns!</p>
        {% endif %}

        <h2>Próximos Desafios</h2>
        {% if locked_challenges %}
            {% for challenge in locked_challenges %}
                <div class="challenge-card message-bubble locked">
                    <h3>{{ challenge.title }}</h3>
                    <p><strong>Requer nível:</strong> {{ challenge.level_required }}</p>
                </div>
            {% endfor %}
        {% else %}
            <p class="message-bubble">Não há mais desafios no horizonte. Você é um verdadeiro mestre!</p>
        {% endif %}
    </section>
{% endblock %}