{% extends "base_layout.html" %}

{% block title %}Gerir FAQs{% endblock %}

{% block content %}
<div class="w-full max-w-4xl mx-auto p-6 bg-gray-900/50 backdrop-blur-sm border border-gray-700 rounded-lg shadow-lg">
    <h2 class="text-2xl font-bold text-green-400 mb-6 text-center">Gestão de FAQs</h2>

    <!-- Formulário de Adição de FAQ -->
    <div class="mb-10 p-6 border rounded-lg border-gray-700 bg-gray-800/50">
        <h3 class="text-xl font-semibold mb-4 text-yellow-400">Adicionar Nova FAQ</h3>
        <form method="POST" action="{{ url_for('admin_faq') }}" enctype="multipart/form-data" class="space-y-4">
            <div>
                <label for="category" class="block text-sm font-medium text-gray-300">Categoria</label>
                <select name="category" id="category" required class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md">
                    {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="question" class="block text-sm font-medium text-gray-300">Pergunta</label>
                <input type="text" id="question" name="question" required class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md" placeholder="Digite a pergunta">
            </div>
            <div>
                <label for="answer" class="block text-sm font-medium text-gray-300">Resposta</label>
                <textarea id="answer" name="answer" rows="4" required class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md" placeholder="Use ```python ... ``` para blocos de código"></textarea>
            </div>
            <div>
                <label for="image_url" class="block text-sm font-medium text-gray-300">URL da Imagem (opcional)</label>
                <input type="url" id="image_url" name="image_url" class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md" placeholder="https://exemplo.com/imagem.jpg">
            </div>
            <div>
                <label for="video_url" class="block text-sm font-medium text-gray-300">URL do Vídeo (opcional)</label>
                <input type="url" id="video_url" name="video_url" class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md" placeholder="https://youtube.com/watch?v=...">
            </div>
             <div>
                <label for="file" class="block text-sm font-medium text-gray-300">Anexar Ficheiro (opcional)</label>
                <input type="file" name="file" id="file" class="mt-1 block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-600 file:text-white hover:file:bg-green-700 cursor-pointer">
            </div>
            <button type="submit" name="add_question" class="w-full py-2 px-4 rounded-md font-medium text-white bg-green-600 hover:bg-green-700">Adicionar FAQ</button>
        </form>
    </div>

    <!-- Formulário de Importação de FAQs -->
    <div class="p-6 border rounded-lg border-gray-700 bg-gray-800/50">
        <h3 class="text-xl font-semibold mb-4 text-yellow-400">Importar FAQs em Lote</h3>
        <form method="POST" action="{{ url_for('admin_faq') }}" enctype="multipart/form-data" class="space-y-4">
            <div>
                <label for="category_import" class="block text-sm font-medium text-gray-300">Categoria para Importação</label>
                <select id="category_import" name="category_import" required class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md">
                    {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="faq_file" class="block text-sm font-medium text-gray-300">Selecione um ficheiro (JSON, CSV ou PDF)</label>
                <input type="file" id="faq_file" name="faq_file" accept=".json,.csv,.pdf" required class="mt-1 block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-600 file:text-white hover:file:bg-green-700 cursor-pointer">
            </div>
            <button type="submit" name="import_faqs" class="w-full py-2 px-4 rounded-md font-medium text-white bg-blue-600 hover:bg-blue-700">Importar FAQs</button>
        </form>
    </div>
</div>
{% endblock %}

