{% extends "admin_base.html" %}
{% block title %}Admin - Níveis - Service Desk{% endblock %}
{% block page_title %}Gerenciar Níveis e Insígnias{% endblock %}

{% block content %}
<h2 class="text-xl font-semibold mb-2">Lista de Níveis</h2>
<div class="bg-white dark:bg-gray-800 p-4 rounded shadow-md">
    <table class="w-full">
        <thead>
            <tr class="bg-gray-200 dark:bg-gray-700">
                <th class="p-2 text-left">Insígnia</th>
                <th class="p-2 text-left">Nome</th>
                <th class="p-2 text-left">Pontos Mínimos</th>
                <th class="p-2 text-left">Ações</th> </tr>
        </thead>
        <tbody>
            {% for level in levels %}
                <tr class="border-b dark:border-gray-700">
                    <td class="p-2">
                        {% if level.insignia and 'cloudinary' in level.insignia %}
                            <img src="{{ level.insignia }}" alt="{{ level.name }}" class="w-10 h-10 rounded-full">
                        {% elif level.insignia %}
                            <span class="text-2xl">{{ level.insignia }}</span> {% else %}
                            <span>N/A</span>
                        {% endif %}
                    </td>
                    <td class="p-2">{{ level.name }}</td>
                    <td class="p-2">{{ level.min_points }}</td>
                    <td class="p-2"> <form method="POST" action="{{ url_for('admin_delete_level', level_id=level.id) }}" onsubmit="return confirm('Tem a certeza que quer excluir este nível?');">
                            <button type="submit" class="text-red-500 hover:underline">Excluir</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}